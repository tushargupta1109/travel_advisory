(this.webpackJsonptravel_advisor=this.webpackJsonptravel_advisor||[]).push([[0],{160:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(20),i=a.n(r),s=a(53),c=a(18),o=a(27),l=a(0),u=a.n(l),d=a(2),j=a(195),p=a(196),b=a(192),h=a(197),m=a(8),f=Object(n.createContext)(),g=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),r=a[0],i=a[1];return Object(m.jsx)(f.Provider,{value:[r,i],children:e.children})},x=a(72);a(161),a(132);x.a.initializeApp({apiKey:"AIzaSyC88jko0k35fv0pp_il35aYaHQV48XivQ4",authDomain:"sound-coil-324011.firebaseapp.com",projectId:"sound-coil-324011",storageBucket:"sound-coil-324011.appspot.com",messagingSenderId:"93278994873",appId:"1:93278994873:web:731a021beeefd6df80b668",measurementId:"G-SLSJ0RJ6VY"});var O=x.a.firestore(),v=x.a,y=(x.a.auth(),a(6)),w=a(187),C=a(24),k=Object(w.a)((function(e){return{title:Object(y.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(y.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(C.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(C.a)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(y.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),toolbar:{display:"flex",justifyContent:"space-between"}}})),N=a(189),T=a(190),I=a(191),R=a(203),S=a(193),_=a(194),B=a(85),A=a.n(B),z=a(86),P=a.n(z),L=a(204),E=Object(w.a)((function(){return{chip:{margin:"5px 5px 5px 0"},subtitle:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"10px"},spacing:{display:"flex",alignItems:"center",justifyContent:"space-between"}}})),F=(v.auth(),function(e){var t,a=e.place,n=e.refProp,r=E(),i=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.auth().currentUser.uid,e.next=3,O.collection("users").doc(t).get();case 3:return n=e.sent,e.next=6,n.data().fav;case 6:r=e.sent,i=r.filter((function(e){return e.obj.name!==a.obj.name})),O.collection("users").doc(t).set({fav:i}),alert("removed successfully ,refresh the page");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)(N.a,{elevation:6,ref:n,style:{width:550},children:[Object(m.jsx)(T.a,{style:{height:350},image:a.obj.photo?a.obj.photo.images.large.url:"https://www.foodserviceandhospitality.com/wp-content/uploads/2016/09/Restaurant-Placeholder-001.jpg",title:a.obj.name}),Object(m.jsxs)(I.a,{children:[Object(m.jsx)(b.a,{gutterBottom:!0,variant:"h5",children:a.obj.name}),Object(m.jsxs)(R.a,{display:"flex",justifyContent:"space-between",my:2,children:[Object(m.jsx)(L.a,{name:"read-only",value:Number(a.obj.rating),readOnly:!0}),Object(m.jsxs)(b.a,{component:"legend",children:[a.obj.num_reviews," review",a.obj.num_reviews>1&&"s"]})]}),Object(m.jsxs)(R.a,{display:"flex",justifyContent:"space-between",children:[Object(m.jsx)(b.a,{component:"legend",children:"Ranking"}),Object(m.jsx)(b.a,{gutterBottom:!0,variant:"subtitle1",children:a.obj.ranking})]}),null===a||void 0===a||null===(t=a.obj.awards)||void 0===t?void 0:t.map((function(e){return Object(m.jsxs)(R.a,{display:"flex",justifyContent:"space-between",my:1,alignItems:"center",children:[Object(m.jsx)("img",{src:e.images.small}),Object(m.jsx)(b.a,{variant:"subtitle2",color:"textSecondary",children:e.display_name})]})})),a.obj.address&&Object(m.jsxs)(b.a,{gutterBottom:!0,variant:"body2",color:"textSecondary",className:r.subtitle,children:[Object(m.jsx)(A.a,{}),a.obj.address]}),a.obj.phone&&Object(m.jsxs)(b.a,{variant:"body2",color:"textSecondary",className:r.spacing,children:[Object(m.jsx)(P.a,{})," ",a.obj.phone]})]}),Object(m.jsx)(S.a,{children:Object(m.jsx)(_.a,{size:"small",color:"primary",onClick:function(){return i()},children:"Remove from favourites"})})]})}),D=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],r=t[1],i=k(),o=v.auth().currentUser.uid,l=Object(n.useContext)(f),g=Object(c.a)(l,2),x=g[0],y=g[1];return Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.collection("users").doc(o).get().then((function(e){e.data()&&y(e.data().fav)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.useEffect)((function(){r((function(e){return Array(x.length).fill().map((function(t,a){return e[a]||Object(n.createRef)()}))}))}),[x]),Object(m.jsxs)("div",{children:[Object(m.jsx)(j.a,{position:"static",children:Object(m.jsxs)(p.a,{className:i.toolbar,children:[Object(m.jsx)(b.a,{variant:"h5",className:i.title,children:"Travel Router"}),Object(m.jsx)(b.a,{variant:"h5",className:i.title,children:"My Favourites"}),Object(m.jsx)(s.b,{to:"/",style:{color:"white",textDecoration:"none"},children:Object(m.jsx)(b.a,{variant:"h6",className:i.title,children:"Go to Home"})})]})}),0===x.length?Object(m.jsx)(b.a,{variant:"h4",className:i.title,style:{paddingTop:80,textAlign:"center"},children:"No Favourites Added."}):Object(m.jsx)(h.a,{container:!0,spacing:3,children:null===x||void 0===x?void 0:x.map((function(e,t){return Object(m.jsx)(h.a,{ref:a[t],item:!0,xs:12,style:{display:"flex",justifyContent:"center"},children:Object(m.jsx)(F,{refProp:a[t],place:e})},t)}))})]})},H=a(201),U=a(109),J=a.n(U),Q=function(){var e=Object(d.a)(u.a.mark((function e(t,a,n){var r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.a.get("https://travel-advisor.p.rapidapi.com/".concat(t,"/list-in-boundary"),{params:{bl_latitude:a.lat,bl_longitude:a.lng,tr_longitude:n.lng,tr_latitude:n.lat},headers:{"x-rapidapi-host":"travel-advisor.p.rapidapi.com","x-rapidapi-key":"82c987286amsh081f9d7fbc57d8fp165b3ajsnf44f523bdeee"}});case 3:return r=e.sent,i=r.data.data,e.abrupt("return",i);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),V=a(115),G=a(205),W=a(110),Y=a.n(W),K=Object(w.a)((function(e){return{title:Object(y.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(y.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(C.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(C.a)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(y.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),toolbar:{display:"flex",justifyContent:"space-between"}}})),X=a(68),M=v.auth(),Z=function(e){var t=e.setCoords,a=K(),r=Object(n.useState)(null),i=Object(c.a)(r,2),o=i[0],l=i[1],u=Object(X.a)(M),d=Object(c.a)(u,1)[0];return Object(m.jsx)(j.a,{position:"static",children:Object(m.jsxs)(p.a,{className:a.toolbar,children:[Object(m.jsx)(b.a,{variant:"h5",className:a.title,children:"Travel Router"}),d?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(s.b,{to:"/Favourites",style:{color:"white",textDecoration:"none"},children:Object(m.jsx)(b.a,{variant:"h5",className:a.title,children:"Favourites"})}),Object(m.jsx)(b.a,{variant:"h5",style:{color:"white",cursor:"pointer"},className:a.title,onClick:function(){v.auth().signOut().then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},children:"Logout"})]}):Object(m.jsx)(b.a,{variant:"h5",style:{color:"white",cursor:"pointer"},className:a.title,onClick:function(){return function(){var e=new v.auth.GoogleAuthProvider;v.auth().signInWithPopup(e).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}()},children:"Login"}),Object(m.jsxs)(R.a,{display:"flex",children:[Object(m.jsx)(b.a,{variant:"h5",className:a.title,children:"Explore new places"}),Object(m.jsx)(V.a,{onLoad:function(e){return l(e)},onPlaceChanged:function(){var e=o.getPlace().geometry.location.lat(),a=o.getPlace().geometry.location.lng();t({lat:e,lng:a})},children:Object(m.jsxs)("div",{className:a.search,children:[Object(m.jsx)("div",{className:a.searchIcon,children:Object(m.jsx)(Y.a,{})}),Object(m.jsx)(G.a,{placeholder:"Search\u2026",classes:{root:a.inputRoot,input:a.inputInput}})]})})]})]})})},q=a(198),$=a(199),ee=a(207),te=a(202),ae=a(208),ne=a(111),re=a.n(ne),ie=a(206),se=Object(w.a)((function(){return{chip:{margin:"5px 5px 5px 0"},subtitle:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"10px"},spacing:{display:"flex",alignItems:"center",justifyContent:"space-between"}}})),ce=v.auth(),oe=function(e){var t,a,r,i=e.place,s=e.selected,o=e.refProp,l=Object(n.useContext)(f),j=Object(c.a)(l,2),p=(j[0],j[1],Object(X.a)(ce)),h=Object(c.a)(p,1)[0],g=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n,r,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(t=v.auth().currentUser.uid)){e.next=3;break}return e.abrupt("return");case 3:return a={name:i.name?i.name:"",address:i.address?i.address:"",photo:i.photo?i.photo:"",ranking:i.ranking?i.ranking:"",rating:i.rating?i.rating:"",num_reviews:i.num_reviews?i.num_reviews:"",awards:i.awards?i.awards:[]},e.next=6,O.collection("users").doc(t).get();case 6:if(!(n=e.sent)){e.next=20;break}if(!n.data()){e.next=17;break}return e.next=11,n.data().fav;case 11:r=e.sent,s=!0,r.map((function(e){e.obj.name===a.name&&(s=!1)})),!0===s?(r.push({obj:a}),O.collection("users").doc(t).set({fav:r},{merge:!0}),alert("added to favourites")):alert("already in favourites"),e.next=20;break;case 17:c=[{obj:a}],O.collection("users").doc(t).set({fav:c}),alert("added to favourites");case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();s&&(null===o||void 0===o||null===(t=o.current)||void 0===t||t.scrollIntoView({behavior:"smooth",block:"start"}));var x=se();return Object(m.jsxs)(N.a,{elevation:6,ref:o,children:[Object(m.jsx)(T.a,{style:{height:350},image:i.photo?i.photo.images.large.url:"https://www.foodserviceandhospitality.com/wp-content/uploads/2016/09/Restaurant-Placeholder-001.jpg",title:i.name}),Object(m.jsxs)(I.a,{children:[Object(m.jsx)(b.a,{gutterBottom:!0,variant:"h5",children:i.name}),Object(m.jsxs)(R.a,{display:"flex",justifyContent:"space-between",my:2,children:[Object(m.jsx)(L.a,{name:"read-only",value:Number(i.rating),readOnly:!0}),Object(m.jsxs)(b.a,{component:"legend",children:[i.num_reviews," review",i.num_reviews>1]})]}),Object(m.jsxs)(R.a,{display:"flex",justifyContent:"space-between",children:[Object(m.jsx)(b.a,{component:"legend",children:"Ranking"}),Object(m.jsx)(b.a,{gutterBottom:!0,variant:"subtitle1",children:i.ranking})]}),null===i||void 0===i||null===(a=i.awards)||void 0===a?void 0:a.map((function(e){return Object(m.jsxs)(R.a,{display:"flex",justifyContent:"space-between",my:1,alignItems:"center",children:[Object(m.jsx)("img",{src:e.images.small}),Object(m.jsx)(b.a,{variant:"subtitle2",color:"textSecondary",children:e.display_name})]})})),null===i||void 0===i||null===(r=i.cuisine)||void 0===r?void 0:r.map((function(e){var t=e.name;return Object(m.jsx)(ie.a,{size:"small",label:t,className:x.chip},t)})),i.address&&Object(m.jsxs)(b.a,{gutterBottom:!0,variant:"body2",color:"textSecondary",className:x.subtitle,children:[Object(m.jsx)(A.a,{}),i.address]}),i.phone&&Object(m.jsxs)(b.a,{variant:"body2",color:"textSecondary",className:x.spacing,children:[Object(m.jsx)(P.a,{})," ",i.phone]})]}),Object(m.jsxs)(S.a,{children:[Object(m.jsx)(_.a,{size:"small",color:"primary",onClick:function(){return window.open(i.web_url,"_blank")},children:"Trip Advisor"}),Object(m.jsx)(_.a,{size:"small",color:"primary",onClick:function(){return window.open(i.website,"_blank")},children:"Website"}),h?Object(m.jsx)(_.a,{size:"small",color:"primary",onClick:function(){return g()},children:"Add to favourite"}):""]})]})},le=Object(w.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120,marginBottom:"30px"},selectEmpty:{marginTop:e.spacing(2)},loading:{height:"600px",display:"flex",justifyContent:"center",alignItems:"center"},container:{padding:"25px"},marginBottom:{marginBottom:"30px"},list:{height:"75vh",overflow:"auto"}}})),ue=function(e){var t=e.places,a=e.type,r=e.setType,i=e.rating,s=e.setRating,o=e.childClicked,l=e.isLoading,u=Object(n.useState)([]),d=Object(c.a)(u,2),j=d[0],p=d[1],f=le();return Object(n.useEffect)((function(){p((function(e){return Array(t.length).fill().map((function(t,a){return e[a]||Object(n.createRef)()}))}))}),[t]),Object(n.useEffect)((function(){re()({key:"e60022313b49ea12706c53ee7cb7caf92e956eca572e1d8b807a3e2338fdd0dc/stage",onCommand:function(e){"attractionrateCommand"===e.command&&s(e.rate),"hotelrateCommand"===e.command&&s(e.rate),"restaurantrateCommand"===e.command&&s(e.rate),"filterTypeCommand"===e.command&&r(e.type)}})}),[]),Object(m.jsxs)("div",{className:f.container,children:[Object(m.jsx)(b.a,{variant:"h4",children:"Resturants,Hotels & Attractions around you"}),l?Object(m.jsx)("div",{className:f.loading,children:Object(m.jsx)(q.a,{size:"5rem"})}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)($.a,{className:f.formControl,children:[Object(m.jsx)(ee.a,{id:"type",children:"Type"}),Object(m.jsxs)(te.a,{id:"type",value:a,onChange:function(e){return r(e.target.value)},children:[Object(m.jsx)(ae.a,{value:"restaurants",children:"Restaurants"}),Object(m.jsx)(ae.a,{value:"hotels",children:"Hotels"}),Object(m.jsx)(ae.a,{value:"attractions",children:"Attractions"})]})]}),Object(m.jsxs)($.a,{className:f.formControl,children:[Object(m.jsx)(ee.a,{id:"rating",children:"Rating"}),Object(m.jsxs)(te.a,{id:"rating",value:i,onChange:function(e){return s(e.target.value)},children:[Object(m.jsx)(ae.a,{value:"0",children:"All"}),Object(m.jsx)(ae.a,{value:"3",children:"Above 3 star"}),Object(m.jsx)(ae.a,{value:"4",children:"Above 4 star"})]})]}),Object(m.jsx)(h.a,{container:!0,spacing:3,className:f.list,children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(m.jsx)(h.a,{ref:j[t],item:!0,xs:12,children:Object(m.jsx)(oe,{selected:Number(o)===t,refProp:j[t],place:e})},t)}))})]})]})},de=a(112),je=a(200),pe=a(118),be=a(114),he=a.n(be),me=[{featureType:"all",elementType:"all",stylers:[{saturation:"32"},{lightness:"-3"},{visibility:"on"},{weight:"1.18"}]},{featureType:"administrative",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"landscape",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"all",stylers:[{saturation:"-70"},{lightness:"14"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{saturation:"100"},{lightness:"-14"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"},{lightness:"12"}]}],fe=Object(w.a)((function(){return{paper:{padding:"10px",display:"flex",flexDirection:"column",justifyContent:"center",width:"100px"},mapContainer:{height:"85vh",width:"100%"},markerContainer:{position:"absolute",transform:"translate(-50%, -50%)",zIndex:1,"&:hover":{zIndex:2}},pointer:{cursor:"pointer"}}})),ge=function(e){var t=e.coords,a=e.places,n=e.setCoords,r=e.setBounds,i=e.setChildClicked,s=Object(je.a)("(min-width:600px)"),c=fe();return Object(m.jsx)("div",{className:c.mapContainer,children:Object(m.jsx)(de.a,{bootstrapURLKeys:{key:"AIzaSyC88jko0k35fv0pp_il35aYaHQV48XivQ4"},defaultCenter:t,center:t,defaultZoom:14,margin:[50,50,50,50],options:{disableDefaultUI:!0,zoomControl:!0,styles:me},onChange:function(e){n({lat:e.center.lat,lng:e.center.lng}),r({ne:e.marginBounds.ne,sw:e.marginBounds.sw})},onChildClick:function(e){return i(e)},children:a.length&&a.map((function(e,t){return Object(m.jsx)("div",{className:c.markerContainer,lat:Number(e.latitude),lng:Number(e.longitude),children:s?Object(m.jsxs)(pe.a,{elevation:3,className:c.paper,children:[Object(m.jsxs)(b.a,{className:c.typography,variant:"subtitle2",gutterBottom:!0,children:[" ",e.name]}),Object(m.jsx)("img",{className:c.pointer,src:e.photo?e.photo.images.large.url:"https://www.foodserviceandhospitality.com/wp-content/uploads/2016/09/Restaurant-Placeholder-001.jpg"}),Object(m.jsx)(L.a,{name:"read-only",size:"small",value:Number(e.rating),readOnly:!0})]}):Object(m.jsx)(he.a,{color:"primary",fontSize:"large"})},t)}))})})},xe=function(){var e=Object(n.useState)("restaurants"),t=Object(c.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)("0"),s=Object(c.a)(i,2),o=s[0],l=s[1],u=Object(n.useState)({}),d=Object(c.a)(u,2),j=d[0],p=d[1],b=Object(n.useState)({}),f=Object(c.a)(b,2),g=f[0],x=f[1],O=Object(n.useState)([]),v=Object(c.a)(O,2),y=v[0],w=v[1],C=Object(n.useState)([]),k=Object(c.a)(C,2),N=k[0],T=k[1],I=Object(n.useState)(null),R=Object(c.a)(I,2),S=R[0],_=R[1],B=Object(n.useState)(!1),A=Object(c.a)(B,2),z=A[0],P=A[1];return Object(n.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,a=t.latitude,n=t.longitude;p({lat:a,lng:n})}))}),[]),Object(n.useEffect)((function(){var e=N.filter((function(e){return Number(e.rating)>o}));w(e)}),[o]),Object(n.useEffect)((function(){g.sw&&g.ne&&(P(!0),Q(a,g.sw,g.ne).then((function(e){T(null===e||void 0===e?void 0:e.filter((function(e){return e.name&&e.num_reviews>0}))),w([]),l(""),P(!1)})))}),[a,g]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(H.a,{}),Object(m.jsx)(Z,{setCoords:p}),Object(m.jsxs)(h.a,{container:!0,spacing:3,style:{width:"100%"},children:[Object(m.jsx)(h.a,{item:!0,xs:12,md:4,children:Object(m.jsx)(ue,{isLoading:z,childClicked:S,places:y.length?y:N,type:a,setType:r,rating:o,setRating:l})}),Object(m.jsx)(h.a,{item:!0,xs:12,md:8,style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(m.jsx)(ge,{setChildClicked:_,setBounds:x,setCoords:p,coords:j,places:y.length?y:N})})]})]})},Oe=v.auth(),ve=function(){var e=Object(X.a)(Oe),t=Object(c.a)(e,1)[0];return Object(m.jsx)(g,{children:Object(m.jsx)(s.a,{children:Object(m.jsx)("div",{children:Object(m.jsxs)(o.c,{children:[Object(m.jsx)(o.a,{path:"/",exact:!0,component:xe}),t?Object(m.jsx)(o.a,{path:"/Favourites",component:D}):""]})})})})};i.a.render(Object(m.jsx)(s.a,{children:Object(m.jsx)(ve,{})}),document.getElementById("root"))}},[[160,1,2]]]);
//# sourceMappingURL=main.0cd0de85.chunk.js.map